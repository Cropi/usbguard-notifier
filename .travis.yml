language: cpp
compiler:
- clang
- gcc
os: linux
sudo: required
dist: trusty
matrix:
    include:
        - os: linux
        compiler: gcc
        addons:
            apt:
                sources: ['ubuntu-toolchain-r-test']
                packages: ['g++-6', 'gcc-6']
        env: CXX=g++-6 CC=gcc-6
        - os: linux
        compiler: clang
        addons:
            apt:
                sources: ['ubuntu-toolchain-r-test', 'llvm-toolchain-precise-3.8']
                packages: ['clang-3.8']
        env: CXX=clang++-3.8 C=clang-3.8

before_install:
- sudo add-apt-repository -y ppa:chris-lea/libsodium
- sudo apt-get -qq update
- sudo apt-get install -y ansible
- sudo apt-get install -y libudev-dev libsodium-dev libqb-dev libcap-ng-dev libseccomp-dev
- sudo apt-get install -y libglib2.0-dev libdbus-glib-1-dev libxml2-utils libpolkit-gobject-1-dev xsltproc
- sudo apt-get install -y lcov
- sudo apt-get install -y aspell aspell-en
- sudo apt-get install -y libprotobuf-dev protobuf-compiler
- sudo apt-get install -y libldap-dev
- sudo apt-get install -y valgrind
- sudo apt-get install -y umockdev libumockdev-dev
- sudo gem install coveralls-lcov
- sudo apt-get install -y usbguard usbguard-dev
- sudo apt-get install -y libnotify libnotify-dev

install:
- ./autogen.sh
- CXX=${COMPILER_CXX:=$CXX} CC=${COMPILER_C:=$CC} ./configure
- make
- sudo make install


